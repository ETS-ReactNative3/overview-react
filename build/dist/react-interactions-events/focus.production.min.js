/** @license React vundefined
 * react-interactions-events/focus.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
'use strict';(function(l,n){"object"===typeof exports&&"undefined"!==typeof module?module.exports=n(require("react")):"function"===typeof define&&define.amd?define(["react"],n):l.ReactEventsFocus=n(l.React)})(this,function(l){function n(a,c,d){a.forEach(function(b){window.addEventListener(b,c,d)})}function y(){z||(z=!0,n(A,H,r?{capture:!0,passive:!0}:!0))}function H(a){switch(a.type){case "pointermove":case "pointerdown":case "pointerup":g=!1;p=a.pointerType;break;case "keydown":case "keyup":var c=
a.altKey,d=a.ctrlKey;a.metaKey||!B&&c||d||(p="keyboard",g=!0);break;case "touchmove":case "touchstart":case "touchend":m=!0;g=!1;p="touch";break;case "mousedown":m?m=!1:(g=!1,p="mouse")}}function h(a){return"function"===typeof a}function q(a,c,d,b,e){return{isTargetAttached:e,target:d,type:c,pointerType:b,timeStamp:a.getTimeStamp(),continuePropagation:function(){a.continuePropagation()}}}function u(a,c,d,b){a=a.type;g=!1;null===d.focusTarget||"mousedown"!==a&&"touchstart"!==a&&"pointerdown"!==a||
b(!1)}function C(a,c,d,b){var e=a.type;d.pointerType=p;switch(e){case "pointermove":case "pointerdown":case "pointerup":u(a,c,d,b);break;case "keydown":case "keyup":c=d.focusTarget;a=a.nativeEvent;d=a.altKey;e=a.ctrlKey;a.metaKey||!B&&d||e||null!==c&&b(!0);break;case "touchmove":case "touchstart":case "touchend":u(a,c,d,b);break;case "mousedown":m||u(a,c,d,b)}}function I(a,c,d){var b=d.pointerType,e=d.focusTarget,f=c.onFocus;h(f)&&(b=q(a,"focus",e,b,!0),a.dispatchEvent(b,f,0));f=c.onFocusChange;h(f)&&
a.dispatchEvent(!0,f,0);d.isFocusVisible&&v(a,c,!0)}function w(a,c,d){var b=d.pointerType,e=d.focusTarget,f=c.onBlur;h(f)&&(b=q(a,"blur",e,b,!0),a.dispatchEvent(b,f,0));f=c.onFocusChange;h(f)&&a.dispatchEvent(!1,f,0);d.isFocusVisible&&v(a,c,!1)}function J(a,c,d,b){var e=b.pointerType;c=b.focusTarget||c.target;d=d.onFocusWithin;h(d)&&(e=q(a,"focuswithin",c,e,!0),a.dispatchEvent(e,d,0))}function D(a,c,d,b){var e=b.pointerType;c=b.focusTarget||c.target;d=d.onBlurWithin;b=null===b.detachedTarget;h(d)&&
(e=q(a,"blurwithin",c,e,b),a.dispatchEvent(e,d,0))}function v(a,c,d){c=c.onFocusVisibleChange;h(c)&&a.dispatchEvent(d,c,0)}function t(a,c,d,b){var e=c.onFocusWithinChange;h(e)&&a.dispatchEvent(b,e,0);d.isFocusVisible&&x(a,c,d,b)}function x(a,c,d,b){c=c.onFocusWithinVisibleChange;h(c)&&a.dispatchEvent(b,c,0)}var g=!0,z=!1,p="",m=!1,B="undefined"!==typeof window&&null!=window.navigator?/^Mac/.test(window.navigator.platform):!1,r=!1;if("undefined"!==typeof window&&"undefined"!==typeof window.document&&
"undefined"!==typeof window.document.createElement)try{var k={};Object.defineProperty(k,"passive",{get:function(){r=!0}});window.addEventListener("test",k,k);window.removeEventListener("test",k,k)}catch(a){r=!1}var A="undefined"!==typeof window&&null!=window.PointerEvent?["keydown","keyup","pointermove","pointerdown","pointerup"]:"keydown keyup mousedown touchmove touchstart touchend".split(" ");k=["focus","blur","beforeblur"].concat(A);var E=["blur"],F=l.unstable_createResponder("Focus",{targetEventTypes:k,
targetPortalPropagation:!0,getInitialState:function(){return{detachedTarget:null,focusTarget:null,isFocused:!1,isFocusVisible:!1,pointerType:""}},onMount:function(){y()},onEvent:function(a,c,d,b){var e=a.type,f=a.target;if(d.disabled)b.isFocused&&(w(c,d,b),b.isFocused=!1,b.focusTarget=null);else switch(e){case "focus":b.focusTarget=c.getResponderNode();b.isFocused||b.focusTarget!==f||(b.isFocused=!0,b.isFocusVisible=g,I(c,d,b));m=!1;break;case "blur":b.isFocused&&(w(c,d,b),b.isFocusVisible=g,b.isFocused=
!1);null==a.nativeEvent.relatedTarget&&(b.pointerType="");m=!1;break;default:C(a,c,b,function(a){b.isFocused&&b.isFocusVisible!==a&&(b.isFocusVisible=a,v(c,d,a))})}},onUnmount:function(a,c,d){d.isFocused&&w(a,c,d)}}),G=l.unstable_createResponder("FocusWithin",{targetEventTypes:k,targetPortalPropagation:!0,getInitialState:function(){return{detachedTarget:null,focusTarget:null,isFocused:!1,isFocusVisible:!1,pointerType:""}},onMount:function(){y()},onEvent:function(a,c,d,b){var e=a.type,f=a.nativeEvent.relatedTarget;
if(d.disabled)b.isFocused&&(t(c,d,b,!1),b.isFocused=!1,b.focusTarget=null);else switch(e){case "focus":b.focusTarget=c.getResponderNode();b.isFocused||(b.isFocused=!0,b.isFocusVisible=g,t(c,d,b,!0));!b.isFocusVisible&&g&&(b.isFocusVisible=g,x(c,d,b,!0));J(c,a,d,b);break;case "blur":b.isFocused&&!c.isTargetWithinResponder(f)&&(t(c,d,b,!1),D(c,a,d,b),b.isFocused=!1);break;case "beforeblur":e=d.onBeforeBlurWithin;h(e)?(f=q(c,"beforeblurwithin",a.target,b.pointerType,!0),b.detachedTarget=a.target,c.dispatchEvent(f,
e,0),c.addRootEventTypes(E)):c.continuePropagation();break;default:C(a,c,b,function(a){b.isFocused&&b.isFocusVisible!==a&&(b.isFocusVisible=a,x(c,d,b,a))})}},onRootEvent:function(a,c,d,b){if("blur"===a.type){var e=b.detachedTarget;null!==e&&e===a.target&&(D(c,a,d,b),b.detachedTarget=null,c.removeRootEventTypes(E))}},onUnmount:function(a,c,d){d.isFocused&&t(a,c,d,!1)}});return{get passiveBrowserEventsSupported(){return r},FocusResponder:F,useFocus:function(a){return l.unstable_useResponder(F,a)},FocusWithinResponder:G,
useFocusWithin:function(a){return l.unstable_useResponder(G,a)}}});
